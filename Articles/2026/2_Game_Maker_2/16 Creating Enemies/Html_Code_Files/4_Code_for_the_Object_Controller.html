<!DOCTYPE html>
<html lang="en">



<head>
    <meta name="description" content="Learn Game Maker fundamentals in this tutorial.">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>4 Code for the Object Controller</title>
    
   
 
 
    
    
    <link rel="shortcut icon" href="../../../../../Images/favicon.ico" type="image/x-icon">


    

<link href="../../../../../CSS/myStyles.css" rel="stylesheet" type="text/css">
<link href="../../../../../CSS/DarkOnLight.css" rel="stylesheet" type="text/css">


<style type="text/css">
  /* Add custom styles here if needed */
</style>


<style type="text/css">
<!--
span.RecipeHeadingChar {
color:#8496B0;
font-style:italic;
}
-->
</style>
</head>


<body>

<div class="wrapper">
<header class="header">
    <meta name="description" content="Learn web design fundamentals in this tutorial.">Header</header>
  
  <ul class="navigation">
   <li><a href="../../../../../index.html" class="active"title="Home">Home</a></li>
  <li><a href="../../../../../Articles-This-Week.html" class="active"title="Articles This Week">&#9729;</a></li>
  <li><a href="../../../../../Articles-By-Year.html" title= "Articles By Year">Articles By Year</a></li>
  <li><a href="../../../../../About.html" title="About">About</a></li>
</ul>

<div class = "backgroundBlack"> <p class="h2Silver"><span class="h2Gold"><span class="h2Gold">~Articles This Week~</span></span></p></div>

<article class="main">
  
  
  
  <!--Main Article -->
  
  <p class="h2Black" >~4 Code for the Object Controller~</p>
  
  
  <p class="author">By StarsInDust</p> 
  
   <p class="articleDate" style="text-align:right" >4/27/2026</p>
   
<p>&nbsp;</p>
<p class="code">/<span class="RecipeHeadingChar"><span style="font-size:14.0pt; ">/~~~~~~~~~~ CONTROLLER OBJECT CREATE EVENT  ~~~~~~~~~~~</span></span></p>
<p class="code"><strong><span style="color:#00B050; ">// Integrates item system with  maze generation</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// for 1280x704 room size </span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">&nbsp;</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">&nbsp;</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// STEP 1: INITIALIZE ITEM</span></strong><span style="color:#00B050; "> <strong>SYSTEM</strong></span></p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;===  INITIALIZING ITEM SYSTEM</span> <span style="color:#C00000; ">===&quot;);</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">global.hearts = 3;              <strong><span style="color:#00B050; ">// Starting lives</span></strong></p>
<p class="code">global.max_hearts = 5;          <strong><span style="color:#00B050; ">// Maximum hearts</span></strong></p>
<p class="code">global.apples = 0;              <strong><span style="color:#00B050; ">// Gysahi Greens counter</span></strong></p>
<p class="code">global.bombs_held = 0;          <strong><span style="color:#00B050; ">// Bombs in inventory</span></strong></p>
<p class="code">global.current_floor = 1;       <strong><span style="color:#00B050; ">// Current dungeon floor</span></strong></p>
<p class="code">global.hero_start_x = 0;        <strong><span style="color:#00B050; ">// Will be saved after spawn</span></strong></p>
<p class="code">global.hero_start_y = 0;        <strong><span style="color:#00B050; ">// Will be saved after spawn</span></strong></p>
<p class="code">global.dungeon_completed = false;   <strong><span style="color:#00B050; ">// Track if  player beat the dungeon</span></strong></p>
<p class="code"><span style="background:yellow; ">global.in_fight  = false;        <strong><span style="color:#00B050; ">// Initialize fight state flag</span></strong></span><strong><span style="color:#00B050; "> </span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">show_debug_message(&quot;Hearts: &quot; + string(global.hearts) +  &quot;/&quot; + <strong><span style="color:#C00000; ">string(global.max_hearts));</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;Floor:  &quot; + string(global.current_floor));</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;=== ITEM  SYSTEM READY </span></strong><span style="color:#C00000; ">===&quot;);</span></p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">STEP 2: GENERATE MAZE (Your existing code)</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">var target_width = 1280;</p>
<p class="code">var target_height = 704;</p>
<p class="code">var cell_size = 128;</p>
<p class="code">&nbsp;</p>
<p class="code">var maze_width = floor(target_width / cell_size);</p>
<p class="code">var maze_height = floor(target_height / cell_size);</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;===  CREATING MAZE FOR NEW ROOM SIZE ===&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;Room  dimensions: &quot; + string(target_width) + &quot; x &quot; +  string(target_height));</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;Creating  maze: &quot; + string(maze_width) + &quot; x &quot; + string(maze_height) +  &quot; cells&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;Cell  size: &quot; + string(cell_size) + &quot;px&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;Wall  size: 32px&quot;);</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">var time_seed = get_timer();</p>
<p class="code">random_set_seed(time_seed);</p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;Random  seed set to: &quot; + string(time_seed));</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;Testing  random values: &quot; + string(irandom(100)) + &quot;, &quot; +  string(irandom(100)) + &quot;, &quot; + string(irandom(100)));</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Create and generate the maze</span></strong></p>
<p class="code">global.myMaze = new maze(&quot;recursive_backtrack&quot;,  maze_width, maze_height);</p>
<p class="code">maze_generate(global.myMaze);</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Spawn the maze walls</span></strong></p>
<p class="code">spawn_maze_walls(global.myMaze, cell_size, 0, 0);</p>
<p class="code">&nbsp;</p>
<p class="code">// <strong><span style="color:#00B050; ">Spawn hero and door</span></strong></p>
<p class="code">spawn_object_in_opening(global.myMaze.heroWallSide,  global.myMaze.heroPosition, cell_size, global.myMaze.w, global.myMaze.h,  object_hero, &quot;Hero&quot;);</p>
<p class="code">spawn_object_in_opening(global.myMaze.doorWallSide,  global.myMaze.doorPosition, cell_size, global.myMaze.w, global.myMaze.h,  obj_door, &quot;Door&quot;);</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;=== MAZE  SETUP COMPLETE ===&quot;);</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// STEP 3: SAVE HERO STARTING</span></strong> <strong><span style="color:#00B050; ">POSITION</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;===  SAVING HERO START POSITION ===&quot;);</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">var hero = instance_find(object_hero, 0);</p>
<p class="code">if (hero != noone) {</p>
<p class="code">    global.hero_start_x =  hero.x;</p>
<p class="code">    global.hero_start_y =  hero.y;</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#C00000; ">show_debug_message(&quot;Hero start position saved:  (&quot; + string(global.hero_start_x) + &quot;, &quot; +  string(global.hero_start_y) + &quot;)&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">} else {</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">     show_debug_message(&quot;WARNING: Could not find hero to save  position!&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">}</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// STEP 4: SPAWN ITEMS IN MAZE</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">&nbsp;</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// Balanced spawning: 1-2 of each  item type</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">&nbsp;</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// Random amount between 1-2 for  each</span></strong><span style="color:#00B050; "> <strong>item</strong></span></p>
<p class="code">var hearts_to_spawn = irandom_range(1, 2);</p>
<p class="code">var apples_to_spawn = irandom_range(1, 2);</p>
<p class="code">var bombs_to_spawn = irandom_range(1, 2);</p>
<p class="code">var hazards_to_spawn = irandom_range(1, 2);  <strong><span style="color:#00B050; ">// 1-2 hazard  bombs (guaranteed spawn)</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">spawn_guaranteed_items(global.myMaze, cell_size, hearts_to_spawn,  apples_to_spawn, bombs_to_spawn, hazards_to_spawn);</p>
<p class="code">&nbsp;</p>
<p class="code"><span style="color:#00B050; ">// Alternative methods (comment out  the above and uncomment one of these):</span></p>
<p class="code"><strong><span style="color:#2F5496; ">// OPTION 1: Pure random spawning (adjust spawn_chance in function)</span></strong></p>
<p class="code"><strong><span style="color:#2F5496; ">// spawn_items_in_maze(global.myMaze, cell_size);</span></strong></p>
<p class="code"><strong><span style="color:#2F5496; ">&nbsp;</span></strong></p>
<p class="code"><strong><span style="color:#2F5496; ">// OPTION 2: Fixed exact counts (hearts, apples, good bombs, hazard bombs)</span></strong></p>
<p class="code"><strong><span style="color:#2F5496; ">// spawn_guaranteed_items(global.myMaze, cell_size, 2, 2, 2,</span></strong><span style="color:#2F5496; "> </span>1<strong><span style="color:#2F5496; ">);</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#C00000; ">show_debug_message(&quot;===  DUNGEON FLOOR &quot; + string(global.current_floor) + &quot; READY ===&quot;);</span></strong></p>
<p class="code">&nbsp;</p>
<p class="MsoNormal">&nbsp;</p>





</article>

  
<footer class="footer"> ~ by StarsInDust ~  &#169 2023 –
<script type="text/javascript" src ="../../../../../JavaScript/FooterYearlyDate.js">
</script></footer>


  <script type="text/javascript" src ="../../../../../JavaScript/responsiveImage.js">
</script>   
       
</body>
</html>