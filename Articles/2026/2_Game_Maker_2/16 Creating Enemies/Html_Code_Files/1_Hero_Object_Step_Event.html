<!DOCTYPE html>
<html lang="en">



<head>
    <meta name="description" content="Learn Game Maker fundamentals in this tutorial.">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1 -Hero Object Step Event</title>
    
   
 
 
    
    
    <link rel="shortcut icon" href="../../../../../Images/favicon.ico" type="image/x-icon">


    

<link href="../../../../../CSS/myStyles.css" rel="stylesheet" type="text/css">
<link href="../../../../../CSS/DarkOnLight.css" rel="stylesheet" type="text/css">


<style type="text/css">
  /* Add custom styles here if needed */
</style>


</head>


<body>

<div class="wrapper">
<header class="header">
    <meta name="description" content="Learn web design fundamentals in this tutorial.">Header</header>
  
  <ul class="navigation">
   <li><a href="../../../../../index.html" class="active"title="Home">Home</a></li>
  <li><a href="../../../../../Articles-This-Week.html" class="active"title="Articles This Week">&#9729;</a></li>
  <li><a href="../../../../../Articles-By-Year.html" title= "Articles By Year">Articles By Year</a></li>
  <li><a href="../../../../../About.html" title="About">About</a></li>
</ul>

<div class = "backgroundBlack"> <p class="h2Silver"><span class="h2Gold"><span class="h2Gold">~Articles This Week~</span></span></p></div>

<article class="main">
  
  
  
  <!--Main Article -->
  
  <p class="h2Black" >~1 -Hero Object Step Event~</p>
  
  
  <p class="author">By StarsInDust</p> 
  
   <p class="articleDate" style="text-align:right" >4/27/2026</p>
   
   <p class="H2LBrown"> JUST CODE</p>
   
<p>&nbsp;</p>
<p class="RecipeHeading">// ~~~~~~~~~~~~~~~~~~~~~~  HERO STEP EVENT  ~~~~~~~~~~~~~~~~~~~~~~~</p>
<p class="code"><strong><span style="color:#00B050; ">// Includes item collection,  damage handling, and bomb throwing</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// MOVEMENT INPUT (Your existing  code)</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">var move_x = keyboard_check(vk_right) - keyboard_check(vk_left);</p>
<p class="code">var move_y = keyboard_check(vk_down)  - keyboard_check(vk_up);</p>
<p class="code">&nbsp;</p>
<p class="code">var spd = 4;</p>
<p class="code">var dx  = move_x * spd;</p>
<p class="code">var dy  = move_y * spd;</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// COLLISION CHECK &amp; MOVEMENT  with WALL GLIDING</span></strong></p>
<p class="code">if (dx != 0 || dy != 0) {</p>
<p class="code">    <strong><span style="color:#00B050; ">//</span></strong><span style="color:#00B050; "> <strong>Check full  diagonal move</strong></span></p>
<p class="code">    if (!place_meeting(x +  dx, y + dy, obj_wall_plain) &amp;&amp;</p>
<p class="code">        !place_meeting(x +  dx, y + dy, obj_wall_crackedA) &amp;&amp;</p>
<p class="code">        !place_meeting(x +  dx, y + dy, obj_wall_crackedB)) {</p>
<p class="code">        x += dx;</p>
<p class="code">        y += dy;</p>
<p class="code">    } else {</p>
<p class="code"><strong><span style="color:#00B050; ">        //</span></strong><span style="color:#00B050; "> <strong>Wall gliding: Try to slide along walls smoothly</strong></span></p>
<p class="code">        var moved = false;</p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Try  horizontal only</span></strong></p>
<p class="code">        if (dx != 0  &amp;&amp; !place_meeting(x + dx, y, obj_wall_plain) &amp;&amp;</p>
<p class="code">             !place_meeting(x + dx, y, obj_wall_crackedA) &amp;&amp;</p>
<p class="code">            !place_meeting(x  + dx, y, obj_wall_crackedB)) {</p>
<p class="code">            x += dx;</p>
<p class="code">            moved = true;</p>
<p class="code">        }</p>
<p class="code">&nbsp;</p>
<p class="code">        <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Try vertical  only</span></strong></p>
<p class="code">        if (dy != 0  &amp;&amp; !place_meeting(x, y + dy, obj_wall_plain) &amp;&amp;</p>
<p class="code">             !place_meeting(x, y + dy, obj_wall_crackedA) &amp;&amp;</p>
<p class="code">             !place_meeting(x, y + dy, obj_wall_crackedB)) {</p>
<p class="code">            y += dy;</p>
<p class="code">            moved = true;</p>
<p class="code">        }</p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#00B050; ">// If still stuck in wall - AGGRESSIVE AUTO-ESCAPE</span></strong></p>
<p class="code">        if  (place_meeting(x, y, obj_wall_plain) ||</p>
<p class="code">             place_meeting(x, y, obj_wall_crackedA) ||</p>
<p class="code">             place_meeting(x, y, obj_wall_crackedB)) {</p>
<p class="code">            </p>
<p class="code"><strong><span style="color:#C00000; ">            show_debug_message(&quot;HERO STUCK  IN WALL - AUTO ESCAPING!&quot;);</span></strong></p>
<p class="code">            </p>
<p class="code">            <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Try to nudge  out in 8 directions with larger distance</span></strong></p>
<p class="code">            var  nudge_distance = 16;  // Increased from 4  to 16</p>
<p class="code">            var escaped =  false;</p>
<p class="code">            </p>
<p class="code">            for (var angle  = 0; angle &lt; 360; angle += 45) {</p>
<p class="code">                var nudge_x  = lengthdir_x(nudge_distance, angle);</p>
<p class="code">                var nudge_y  = lengthdir_y(nudge_distance, angle);</p>
<p class="code">                </p>
<p class="code">                if  (!place_meeting(x + nudge_x, y + nudge_y, obj_wall_plain) &amp;&amp;</p>
<p class="code">                     !place_meeting(x + nudge_x, y + nudge_y, obj_wall_crackedA) &amp;&amp;</p>
<p class="code">                     !place_meeting(x + nudge_x, y + nudge_y, obj_wall_crackedB)) {</p>
<p class="code">                    x +=  nudge_x;</p>
<p class="code">                    y +=  nudge_y;</p>
<p class="code">                    escaped  = true;</p>
<p class="code">                     show_debug_message(&quot;Hero auto-escaped from wall at angle &quot; +  string(angle) + &quot;!&quot;);</p>
<p class="code">                    break;</p>
<p class="code">                }</p>
<p class="code">            }</p>
<p class="code">            </p>
<p class="code">            <strong><span style="color:#00B050; ">// If 16px didn't work, try 32px</span></strong></p>
<p class="code">            if (!escaped) {</p>
<p class="code">                <strong><span style="color:#C00000; ">show_debug_message(&quot;Trying larger escape distance</span></strong><span style="color:#C00000; ">...&quot;);</span></p>
<p class="code">                 nudge_distance = 32;</p>
<p class="code">                </p>
<p class="code">                for (var  angle = 0; angle &lt; 360; angle += 45) {</p>
<p class="code">                    var  nudge_x = lengthdir_x(nudge_distance, angle);</p>
<p class="code">                    var  nudge_y = lengthdir_y(nudge_distance, angle);</p>
<p class="code">                    </p>
<p class="code">                    if  (!place_meeting(x + nudge_x, y + nudge_y, obj_wall_plain) &amp;&amp;</p>
<p class="code">                         !place_meeting(x + nudge_x, y + nudge_y, obj_wall_crackedA) &amp;&amp;</p>
<p class="code">                         !place_meeting(x + nudge_x, y + nudge_y, obj_wall_crackedB)) {</p>
<p class="code">                        x  += nudge_x;</p>
<p class="code">                        y  += nudge_y;</p>
<p class="code">                         escaped = true;</p>
<p class="code">                         show_debug_message(&quot;Hero escaped at 32px distance!&quot;);</p>
<p class="code">                         break;</p>
<p class="code">                    }</p>
<p class="code">                }</p>
<p class="code">            }</p>
<p class="code">            </p>
<p class="code">            <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Last resort  - teleport to calculated safe position</span></strong></p>
<p class="code">            if (!escaped) {</p>
<p class="code"><strong><span style="color:#C00000; ">                show_debug_message(&quot;Could  not auto-escape - finding safe locatio</span></strong><span style="color:#C00000; ">n!&quot;);</span></p>
<p class="code">                </p>
<p class="code">                <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Calculate  center of room as fallback</span></strong></p>
<p class="code">                var safe_x  = room_width / 2;</p>
<p class="code">                var safe_y  = room_height / 2;</p>
<p class="code">                </p>
<p class="code">                <strong><span style="color:#00B050; ">// If center is also in wall, try a grid search for ANY  safe spot</span></strong></p>
<p class="code">                if  (place_meeting(safe_x, safe_y, obj_wall_plain) ||</p>
<p class="code">                     place_meeting(safe_x, safe_y, obj_wall_crackedA) ||</p>
<p class="code">                     place_meeting(safe_x, safe_y, obj_wall_crackedB)) {</p>
<p class="code">                    </p>
<p class="code">                    <strong><span style="color:#C00000; ">show_debug_message(&quot;Center blocked - searching for  safe spot...&quot;);</span></strong></p>
<p class="code">                    var  found_safe = false;</p>
<p class="code">                    </p>
<p class="code">                    <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Search in a  grid pattern for a safe spot</span></strong></p>
<p class="code">                    for  (var check_x = 128; check_x &lt; room_width - 128; check_x += 64) {</p>
<p class="code">                        for  (var check_y = 128; check_y &lt; room_height - 128; check_y += 64) {</p>
<p class="code">                             if (!place_meeting(check_x, check_y, obj_wall_plain) &amp;&amp;</p>
<p class="code">                                 !place_meeting(check_x, check_y, obj_wall_crackedA) &amp;&amp;</p>
<p class="code">                                 !place_meeting(check_x, check_y, obj_wall_crackedB)) {</p>
<p class="code">                                 safe_x = check_x;</p>
<p class="code">                                 safe_y = check_y;</p>
<p class="code">                                 found_safe = true;</p>
<p class="code">                                 break;</p>
<p class="code">                             }</p>
<p class="code">                        }</p>
<p class="code">                        if  (found_safe) break;</p>
<p class="code">                    }</p>
<p class="code">                }</p>
<p class="code">                </p>
<p class="code">                x = safe_x;</p>
<p class="code">                y = safe_y;</p>
<p class="code">                <strong><span style="color:#C00000; ">show_debug_message(&quot;Teleported to safe location:  (&quot; + string(safe_x) + &quot;, &quot; + string(safe_y) + &quot;)&quot;);</span></strong></p>
<p class="code">            }</p>
<p class="code">        }</p>
<p class="code">    }</p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// EMERGENCY ESCAPE SYSTEM</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// Press R to find a safe position  (doesn't rely on spawn being safe)</span></strong></p>
<p class="code">if (keyboard_check_pressed(ord(&quot;R&quot;))) {</p>
<p class="code"><strong><span style="color:#C00000; ">     show_debug_message(&quot;=== EMERGENCY ESCAPE ACTIVATED ===&quot;);</span></strong></p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">First try  the original spawn position</span></strong></p>
<p class="code">    if  (!place_meeting(global.hero_start_x, global.hero_start_y, obj_wall_plain)  &amp;&amp;</p>
<p class="code">         !place_meeting(global.hero_start_x, global.hero_start_y,  obj_wall_crackedA) &amp;&amp;</p>
<p class="code">         !place_meeting(global.hero_start_x, global.hero_start_y,  obj_wall_crackedB)) {</p>
<p class="code">        x =  global.hero_start_x;</p>
<p class="code">        y =  global.hero_start_y;</p>
<p class="code">        <strong><span style="color:#C00000; ">show_debug_message(&quot;Returned to spawn: (&quot; +  string(x) + &quot;, &quot; + string(y) + &quot;</span></strong>)<strong><span style="color:#C00000; ">&quot;);</span></strong></p>
<p class="code">    } else {</p>
<p class="code">        <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Spawn is  blocked, find a safe spot</span></strong></p>
<p class="code">        <strong><span style="color:#C00000; ">show_debug_message(&quot;Spawn blocked - searching for  safe location...&quot;);</span></strong></p>
<p class="code">        </p>
<p class="code">        var safe_x =  room_width / 2;</p>
<p class="code">        var safe_y =  room_height / 2;</p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">If center is  also in wall, do a grid search</span></strong></p>
<p class="code">        if  (place_meeting(safe_x, safe_y, obj_wall_plain) ||</p>
<p class="code">             place_meeting(safe_x, safe_y, obj_wall_crackedA) ||</p>
<p class="code">             place_meeting(safe_x, safe_y, obj_wall_crackedB)) {</p>
<p class="code">            </p>
<p class="code">            var found_safe  = false;</p>
<p class="code">            </p>
<p class="code">            <strong><span style="color:#00B050; ">// Search in a grid pattern for ANY safe spot</span></strong></p>
<p class="code">            for (var  check_x = 128; check_x &lt; room_width - 128; check_x += 64) {</p>
<p class="code">                for (var  check_y = 128; check_y &lt; room_height - 128; check_y += 64) {</p>
<p class="code">                    if  (!place_meeting(check_x, check_y, obj_wall_plain) &amp;&amp;</p>
<p class="code">                         !place_meeting(check_x, check_y, obj_wall_crackedA) &amp;&amp;</p>
<p class="code">                         !place_meeting(check_x, check_y, obj_wall_crackedB)) {</p>
<p class="code">                         safe_x = check_x;</p>
<p class="code">                         safe_y = check_y;</p>
<p class="code">                         found_safe = true;</p>
<p class="code">                         break;</p>
<p class="code">                    }</p>
<p class="code">                }</p>
<p class="code">                if  (found_safe) break;</p>
<p class="code">            }</p>
<p class="code">        }</p>
<p class="code">        </p>
<p class="code">        x = safe_x;</p>
<p class="code">        y = safe_y;</p>
<p class="code">        <strong><span style="color:#C00000; ">show_debug_messa</span></strong><span style="color:#C00000; ">ge(&quot;Escaped  to safe location: (&quot; + string(safe_x) + &quot;, &quot; + string(safe_y) +  &quot;)&quot;);</span></p>
<p class="code">    }</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">// Optional: Play a sound effect</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">     // audio_play_sound(snd_teleport, 1,</span></strong> <strong><span style="color:#00B050; ">false);</span></strong></p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// DEBUG: FORCE HERO INTO WALL  (TEMPORARY - REMOVE AFTER TESTING)</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// Press T to teleport hero into a  wall for testing the escape system</span></strong></p>
<p class="code">if (keyboard_check_pressed(ord(&quot;T&quot;))) {</p>
<p class="code">    <strong><span style="color:#00B050; ">// Find a wall and teleport hero</span></strong><span style="color:#00B050; "> <strong>into it</strong></span></p>
<p class="code">    var test_wall =  instance_find(obj_wall_plain, 0);</p>
<p class="code">    </p>
<p class="code">    if (test_wall != noone)  {</p>
<p class="code">        x = test_wall.x;</p>
<p class="code">        y = test_wall.y;</p>
<p class="code">        <strong><span style="color:#C00000; ">show_debug_message(&quot;=== DEBUG: TELEPORTED INTO WALL  FOR TESTING ===&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">        show_debug_message(&quot;Position:  (&quot; + string(x) + &quot;, &quot; + string(y) + &quot;)&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">        show_debug_message(&quot;Press R to  test emergency escape!&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">     } else {</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">        show_debug_message(&quot;No walls found  to teleport into.&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">     }</span></strong></p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// SPRITE SWITCHING (Your existing  code)</span></strong></p>
<p class="code">if (move_y &lt; 0) {</p>
<p class="code">    sprite_index =  sprite_hero_back;</p>
<p class="code">} else if (move_x &gt; 0) {</p>
<p class="code">    sprite_index =  sprite_hero_right;</p>
<p class="code">} else if (move_x &lt; 0) {</p>
<p class="code">    sprite_index =  sprite_hero_left;</p>
<p class="code">} else {</p>
<p class="code">    sprite_index =  sprite_hero;</p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// ITEM COLLECTION</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// --- Collect Heart ---</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">var item_heart = instance_place(x, y, obj_heart);</p>
<p class="code">if (item_heart != noone) {</p>
<p class="code">    <strong><span style="color:#00B050; ">// Heal 1</span></strong><span style="color:#00B050; "> <strong>heart</strong></span></p>
<p class="code">    global.hearts += 1;</p>
<p class="code">    if (global.hearts &gt;  global.max_hearts) {</p>
<p class="code">        global.hearts =  global.max_hearts;</p>
<p class="code">    }</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#C00000; ">show_debug_message(&quot;Collected heart! Hearts: &quot;  + string(global.hearts) + &quot;/&quot; + string(global.max_hearts));</span></strong></p>
<p class="code">     instance_destroy(item_heart);</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">// Optional: Play sound effect</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">     // audio_play_sound(snd_collect_heart, 1, false);</span></strong></p>
<p class="code">}</p>
<p class="code"><strong><span style="color:#00B050; ">&nbsp;</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// --- Collect Apple (Gysahi  Greens style) ---</span></strong></p>
<p class="code">var item_apple = instance_place(x, y, obj_apple);</p>
<p class="code">if (item_apple != noone) {</p>
<p class="code">    global.apples += 1;</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#C00000; ">show_debug_message(&quot;Collected apple! Total: &quot; +  string(global.appl</span></strong><span style="color:#C00000; ">es));</span></p>
<p class="code">     instance_destroy(item_apple);</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">// Optional: Add special effect (like in Chocobo's  Dungeon)</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">     // Could heal 1 heart or give temporary speed boost</span></strong></p>
<p class="code">    <strong><span style="color:#2F5496; ">//</span></strong> <strong><span style="color:#2F5496; ">audio_play_sound(snd_collect_apple,  1, false);</span></strong></p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// --- Collect Bomb (Gold pickup)  ---</span></strong></p>
<p class="code">var item_bomb = instance_place(x, y, obj_bomb);</p>
<p class="code">if (item_bomb != noone) {</p>
<p class="code">    global.bombs_held += 1;</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#C00000; ">show_debug_message(&quot;Picked up bomb! Total bombs:  &quot; + string(global.bombs_held));</span></strong></p>
<p class="code">     instance_destroy(item_bomb);</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">// Optional: Play sound effect</span></strong></p>
<p class="code">    <strong><span style="color:#2F5496; ">//</span></strong> <strong><span style="color:#2F5496; ">audio_play_sound(snd_collect_bomb,  1, false);</span></strong></p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// BOMB THROWING</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// Press SPACE to throw a bomb  (only in dungeon, not during</span></strong> <strong><span style="color:#00B050; ">fights)</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">if (keyboard_check_pressed(vk_space) &amp;&amp; !global.in_fight)  {</p>
<p class="code">    if (global.bombs_held  &gt; 0) {</p>
<p class="code">        global.bombs_held  -= 1;</p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Determine  throw direction based on sprite</span></strong></p>
<p class="code">        var throw_direction  = 270;  <span style="color:#00B050; ">//  Default: down</span></p>
<p class="code">        </p>
<p class="code">        if (sprite_index ==  sprite_hero_back) {</p>
<p class="code">            throw_direction  = 90;   <strong><span style="color:#00B050; ">//  Throw up</span></strong></p>
<p class="code">        } else if  (sprite_index == sprite_hero_right) {</p>
<p class="code">            throw_direction  = 0;    <strong><span style="color:#00B050; ">//  Throw right</span></strong></p>
<p class="code">        } else if  (sprite_index == sprite_hero_left) {</p>
<p class="code">            throw_direction  = 180;  <strong><span style="color:#00B050; ">//  Throw left</span></strong></p>
<p class="code">        } else {</p>
<p class="code">            throw_direction  = 270;  <strong><span style="color:#00B050; ">//  Throw down</span></strong></p>
<p class="code">        }</p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#00B050; ">// Create the bomb projectile slightly ahead of hero</span></strong></p>
<p class="code">        var offset_distance  = 32;  <strong><span style="color:#00B050; ">//  Spawn bomb 32 pixels ahead</span></strong></p>
<p class="code">        var bomb_x = x +  lengthdir_x(offset_distance, throw_direction);</p>
<p class="code">        var bomb_y = y +  lengthdir_y(offset_distance, throw_direction);</p>
<p class="code">        </p>
<p class="code">        var bomb =  instance_create_layer(bomb_x, bomb_y, &quot;Instances&quot;, obj_bomb_thrown);</p>
<p class="code">        bomb.direction =  throw_direction;</p>
<p class="code">        bomb.image_angle =  throw_direction;</p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#C00000; ">show_debug_message(&quot;Threw bomb! Bombs remaining:  &quot; + string(global.bombs_held));</span></strong></p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#00B050; ">// Optional: Play throw</span></strong> <strong><span style="color:#00B050; ">sound</span></strong></p>
<p class="code">        <strong><span style="color:#2F5496; ">//  audio_play_sound(snd_throw_bomb, 1,</span></strong><span style="color:#2F5496; "> <strong>false);</strong></span></p>
<p class="code">    } else {</p>
<p class="code">        <strong><span style="color:#C00000; ">show_debug_message(&quot;No bombs to throw!&quot;);</span></strong></p>
<p class="code">    }</p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// CHECK FOR HAZARDS (Black hazard  bomb damages you)</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// obj_hazard_bomb is the BLACK  hazard bomb that damages the hero</span></strong></p>
<p class="code">&nbsp;</p>
<p class="code">var hazard_bomb = instance_place(x, y, obj_hazard_bomb);</p>
<p class="code">if (hazard_bomb != noone) {</p>
<p class="code">    <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Take damage</span></strong></p>
<p class="code">    global.hearts -= 1;</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#C00000; ">show_debug_message(&quot;Hit a black bomb! Lost 1 heart.  Hearts remaining: &quot; + string(global.hearts));</span></strong></p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">// Destroy the hazard</span></strong></p>
<p class="code">     instance_destroy(hazard_bomb);</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Check if  hero died</span></strong></p>
<p class="code">    if (global.hearts &lt;=  0) {</p>
<p class="code">         show_debug_message(&quot;Hero died! Resetting to floor start...&quot;);</p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#00B050; ">// Teleport back to start</span></strong></p>
<p class="code">        x =  global.hero_start_x;</p>
<p class="code">        y =  global.hero_start_y;</p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Reset hearts</span></strong></p>
<p class="code">        global.hearts = 3;</p>
<p class="code">        </p>
<p class="code">        <strong><span style="color:#C00000; ">show_debug_message(&quot;Respawned at: (&quot; +  string(x) + &quot;, &quot; + string(y) + &quot;)&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">        show_debug_message(&quot;Hearts  restored to: &quot; + string(</span></strong><span style="color:#C00000; ">global.hearts));</span></p>
<p class="code">    }</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">// Optional: Play damage sound and show damage animation</span></strong></p>
<p class="code">    <strong><span style="color:#2F5496; ">//</span></strong> <strong><span style="color:#2F5496; ">audio_play_sound(snd_take_damage,  1, false);</span></strong></p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">// ENEMY COLLISION - TRIGGER FIGHT  SCENE</span></strong></p>
<p class="code"><strong><span style="color:#00B050; ">// Check if hero touches any  dungeon enemy (the blue furry</span></strong><span style="color:#00B050; "> <strong>creatures)</strong></span></p>
<p class="code">if (place_meeting(x, y, obj_enemy_fight)) {</p>
<p class="code">    <strong><span style="color:#C00000; ">show_debug_message(&quot;=== ENEMY ENCOUNTER! ===&quot;);</span></strong></p>
<p class="code"><strong><span style="color:#C00000; ">     show_debug_message(&quot;Triggering fight scene...&quot;);</span></strong></p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">// Save the current room so we can return after the fight</span></strong></p>
<p class="code">    global.current_room =  room;</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Destroy the  enemy in the dungeon (so it doesn't respawn)</span></strong></p>
<p class="code">    var enemy =  instance_place(x, y, obj_enemy_fight);</p>
<p class="code">    if (enemy != noone) {</p>
<p class="code">         instance_destroy(enemy);</p>
<p class="code">    }</p>
<p class="code">    </p>
<p class="code">    <strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">Go to the  fight room</span></strong></p>
<p class="code">    room_goto(rm_fight);</p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="code">&nbsp;</p>
<p class="code"><strong><span style="color:#00B050; ">//</span></strong> <strong><span style="color:#00B050; ">CHECK FOR EXIT (Your existing code)</span></strong></p>
<p class="code">if (place_meeting(x, y, obj_door)) {</p>
<p class="code">    <strong><span style="color:#C00000; ">show_debug_message(&quot;Hero reached the dungeon  exit!&quot;);</span></strong></p>
<p class="code">    global.current_floor +=  1;</p>
<p class="code">    <strong><span style="color:#C00000; ">show_debug_message(&quot;Advancing to floor &quot; +  string(global.current_floor));</span></strong></p>
<p class="code">    regenerate_maze();  <strong><span style="color:#00B050; ">// keeps  treasures and floor number</span></strong></p>
<p class="code">}</p>
<p class="code">&nbsp;</p>
<p class="MsoNormal">&nbsp;</p>





</article>

  
<footer class="footer"> ~ by StarsInDust ~  &#169 2023 –
<script type="text/javascript" src ="../../../../../JavaScript/FooterYearlyDate.js">
</script></footer>


  <script type="text/javascript" src ="../../../../../JavaScript/responsiveImage.js">
</script>   
       
</body>
</html>